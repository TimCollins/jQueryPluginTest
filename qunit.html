<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mangled date examples</title>
    <script>
        function prettyDate(time) {
            var date = new Date(time || ""),
              diff = (((new Date()).getTime() - date.getTime()) / 1000),
              day_diff = Math.floor(diff / 86400);

            if (isNaN(day_diff) || day_diff < 0 || day_diff >= 31)
                return;

            return day_diff == 0 && (
                diff < 60 && "just now" ||
                diff < 120 && "1 minute ago" ||
                diff < 3600 && Math.floor(diff / 60) +
                  " minutes ago" ||
                diff < 7200 && "1 hour ago" ||
                diff < 86400 && Math.floor(diff / 3600) +
                  " hours ago") ||
              day_diff == 1 && "Yesterday" ||
              day_diff < 7 && day_diff + " days ago" ||
              day_diff < 31 && Math.ceil(day_diff / 7) +
                " weeks ago";
        }
        window.onload = function () {
            var links = document.getElementsByTagName("a");
            for (var i = 0; i < links.length; i++) {
                if (links[i].title) {
                    var date = prettyDate(links[i].title);
                    if (date) {
                        links[i].innerHTML = date;
                    }
                }
            }
        };
    </script>
</head>
<body>
    <ul>
        <li class="entry">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis blandit orci ac sapien blandit congue.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/57/" title="2014-09-18T20:24:17Z">
                    <span>September 18th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>
        <li class="entry">
            <p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis sagittis elit sed nunc ultricies, at sollicitudin erat tempus.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/56/" title="2014-09-17T20:24:17Z">
                    <span>September 17th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>
        <li class="entry">
            <p>Pellentesque vulputate cursus tortor, vitae pulvinar leo vehicula efficitur. Vestibulum eleifend ipsum sed dolor bibendum congue.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/55/" title="2014-09-16T20:24:17Z">
                    <span>September 16th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>
        <li class="entry">
            <p>Donec vitae eros eu purus congue posuere. Nulla facilisi. Ut volutpat ipsum leo, et tempor magna facilisis fringilla.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/54/" title="2014-09-15T20:24:17Z">
                    <span>September 15th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>

        <li class="entry">
            <p>Sed rutrum, turpis placerat dapibus finibus, quam orci aliquam dolor, ut egestas dolor metus sit amet nisi. Praesent porttitor vel nibh quis dictum. Quisque et lacus vel neque condimentum tempus.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/53/" title="2014-09-14T20:24:17Z">
                    <span>September 14th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>

        <li class="entry">
            <p>Cras gravida felis in aliquam molestie. Etiam accumsan pretium mi at imperdiet. Vestibulum imperdiet viverra molestie. Morbi tincidunt pharetra dolor et placerat.</p>
            <small class="extra">Posted <span class="time">
                <a href="/2014/09/blah/52/" title="2014-09-13T20:24:17Z">
                    <span>September 13th, 2014</span>
                </a>
            </span>
                by <span class="author"><a href="/tim/">Tim Collins</a></span>
            </small>
        </li>
    </ul>
</body>
</html>
